# HIRA 고시 문서 크롤러 (hira_rulesvc)

건강보험심사평가원(HIRA) 의료급여 고시 및 법규 문서 수집 프로젝트

---

## 📋 프로젝트 개요

**목적**: 건강보험심사평가원의 의료급여 관련 법령, 고시, 행정해석 문서 자동 수집

**데이터 출처**: https://rulesvc.hira.or.kr

**수집 완료일**: 2025-10-17

**수집률**: 100% (56/56개 문서)

---

## 📊 수집 데이터 통계

| 항목 | 값 |
|------|-----|
| 총 문서 수 | 56개 |
| 법령 문서 | 4개 |
| 고시기준 | 13개 |
| 행정해석 | 39개 |
| 파일 형식 | .hwp (55개), .pdf (1개) |
| 총 파일 크기 | ~4.5MB |
| 수집 기간 | 2025-10-13 ~ 2025-10-17 |

---

## 📂 프로젝트 구조

```
hira_rulesvc/
├── scrapers/                    # 크롤러 모듈
│   ├── law_scraper_v3.py       # V3 폴더 기반 크롤러 (최종)
│   ├── law_scraper_v2.py       # V2 SEQ 접근 방식 (미사용)
│   └── law_scraper.py          # V1 초기 버전 (미사용)
├── config/                      # 설정 파일
│   ├── document_tree.json      # 문서 계층 구조 (55개)
│   └── folders_grouped.json    # 폴더별 그룹 (12개)
├── debug/                       # 디버깅 및 유틸리티
│   ├── group_by_folder.py      # 폴더 그룹핑 스크립트
│   ├── verify_downloads.py     # 다운로드 검증 스크립트
│   └── downloaded_list.txt     # 다운로드 파일 목록
└── README.md                    # 이 파일

data/hira_rulesvc/
└── documents/                   # 수집된 문서 (56개)
    ├── (제2025-167호) 요양급여비용 청구방법...hwp
    ├── 의료급여법(법률)(제20309호)(20240517).hwp
    ├── 1-(1) 시설수용자.hwp
    └── ...
```

---

## 📋 수집 문서 메타데이터

### 1. 법령 문서 (4개)

| SEQ | 문서명 | 파일명 | 카테고리 | 발령기관 | 제정번호 |
|-----|--------|--------|----------|----------|----------|
| 2 | 요양급여비용 청구방법(보건복지부 고시) | `(제2025-167호) 요양급여비용 청구방법...hwp` | 법령 | 보건복지부 | 제2025-167호 |
| 125 | 의료급여법 | `의료급여법(법률)(제20309호)(20240517).hwp` | 법령 | 국회 | 제20309호 |
| 112 | 의료급여법 시행령 | `의료급여법 시행령(대통령령)(제34928호)(20241002).hwp` | 법령 | 대통령 | 제34928호 |
| 111 | 의료급여법 시행규칙 | `의료급여법 시행규칙(보건복지부령)(제01096호)(20250311).hwp` | 법령 | 보건복지부 | 제01096호 |

### 2. 고시기준 (13개)

| SEQ | 문서명 | 파일명 | 고시번호 |
|-----|--------|--------|----------|
| 96 | 의료급여수가의 기준 및 일반기준 | `의료급여수가의 기준 및 일반기준(고시 제2025-171호, 25.10.1. 시행)_전문.hwp` | 제2025-171호 |
| 99 | 임신·출산 진료비 등의 의료급여기준 및 방법 | `임신·출산 진료비 등의 의료급여기준 및 방법(보건복지부고시)(제2023-281호)(20240101).hwp` | 제2023-281호 |
| 97 | 요양비의 의료급여기준 및 방법 | `요양비의 의료급여 기준 및 방법(보건복지부고시)(제2025-26호)(20250204).hwp` | 제2025-26호 |
| 100 | 의료급여기관 간 동일성분 의약품 중복투약 관리에 관한 기준 | `의료급여기관 간 동일성분 의약품 중복투약 관리에 관한 기준(보건복지부고시)(제2022-295호)(20221230).hwp` | 제2022-295호 |
| 98 | 선택의료급여기관 적용 대상자 및 이용 절차 등에 관한 규정 | `선택의료급여기관 적용 대상자 및 이용 절차 등에 관한 규정(보건복지부고시)(제2020-329호)(20210101).hwp` | 제2020-329호 |
| 101 | 진통, 진양, 수렴, 소염제인 외용제제 | `「진통¸진양¸수렴¸소염제인 외용제제」 일부개정(전문)_(제2020-140호_2020.07.01).hwp` | 제2020-140호 |
| 206 | 코로나바이러스감염증-19 의료급여 절차 예외 인정기준 | `「코로나바이러스감염증-19 의료급여 절차 예외 인정기준」 일부개정(전문)(제2021-2호¸ 2021.1.5.).hwp` | 제2021-2호 |
| 207 | 업무정지처분에 갈음한 과징금 적용기준 | `업무정지처분에 갈음한 과징금 적용기준(전문).hwp` | - |
| 208 | 급여비용의 예탁 및 지급에 관한 규정 | `(개정전문)「급여비용의 예탁 및 지급에 관한 규정」 일부개정(고시 제2020-140호).hwp` | 제2020-140호 |
| 209 | 수급권자의 건강유지 및 증진 등을 위한 사업의 지원에 관한 기준 | `「수급권자의 건강유지 및 증진 등을 위한 사업의 지원에 관한 기준」 제정(전문)(제2021-142호¸ 2021.5.10.).hwp` | 제2021-142호 |
| 210 | 노숙인진료시설 지정 등에 관한 고시 | `노숙인진료시설 지정 등에 관한 고시(보건복지부고시)(제2025-46호)(20250322).hwp` | 제2025-46호 |
| 211 | 근로능력평가의 기준 등에 관한 규정 | `근로능력평가의 기준 등에 관한 고시(보건복지부고시)(제2025-30호)(20250220).hwp` | 제2025-30호 |
| 216 | 의료급여 대상 여부의 확인 방법 및 절차 등에 관한 기준 | `의료급여 대상 여부의 확인 방법 및 절차 등에 관한 기준(보건복지부고시)(제2023-182호)(20230929).hwp` | 제2023-182호 |

### 3. 행정해석 (39개)

#### 3-1. 의료급여 수급권자 선정기준 및 관리 (5개)

| SEQ | 문서명 | 파일명 | 설명 |
|-----|--------|--------|------|
| 160 | 시설수용자 | `1-(1) 시설수용자.hwp` | 시설 수용자 의료급여 선정 |
| 161 | 무연고자 등 | `1-(2) 무연고자 등.hwp` | 무연고자 의료급여 처리 |
| 162 | 행려환자 | `1-(3)행려환자.hwp` | 행려환자 의료급여 |
| 163 | 노숙인 | `1-(4) 노숙인.hwp` | 노숙인 의료급여 지원 |
| - | 의료급여 자격 | `1-(5) 의료급여 자격.hwp` | 자격 관련 해석 |

#### 3-2. 의료급여체계 (4개)

| SEQ | 문서명 | 파일명 | 설명 |
|-----|--------|--------|------|
| 165 | 의료급여의 절차 | `2-(1) 의료급여의 절차.hwp` | 급여 절차 해석 |
| 166 | 왕진 관련 | `2-(2) 왕진.hwp` | 왕진 의료급여 |
| 167 | 회송 | `2-(3) 회송.hwp` | 회송 절차 해석 |
| 168 | 선택의료급여기관 | `2-(4) 선택의료급여기관2.hwp` | 선택기관 관련 |

#### 3-3. 의료급여의 범위 및 기준 (9개)

| SEQ | 문서명 | 파일명 | 설명 |
|-----|--------|--------|------|
| 170 | 의료급여의 범위 | `3-(1) 의료급여의 범위.hwp` | 급여 범위 해석 |
| 171 | 의료급여 일반기준 | `3-(2) 의료급여 일반기준.hwp` | 일반기준 해석 |
| 180 | 사회복지시설(촉탁의 등) 관련 | `3-(3) 사회복지시설(촉탁의 등) 관련.hwp` | 복지시설 관련 |
| 172 | 중증질환 관련 | `3-(4) 중증질환 관련2.hwp` | 중증질환 급여 |
| 173 | 희귀난치성 질환 관련 | `3-(5) 희귀난치성 질환 관련2.hwp` | 희귀난치성 질환 |
| 174 | 산정특례 관련 | `3-(6) 산정특례 관련3.hwp` | 산정특례 해석 |
| 177 | 노인 틀니 | `3-(7) 노인 틀니.hwp` | 노인 틀니 급여 |
| 178 | 치과 임플란트 | `3-(8) 치과 임플란트.hwp` | 임플란트 급여 |
| 179 | 치석 제거 | `3-(9) 치석 제거.hwp` | 치석 제거 급여 |

#### 3-4. 의료급여 본인부담 (5개)

| SEQ | 문서명 | 파일명 | 설명 |
|-----|--------|--------|------|
| 176 | 급여비용의 부담 | `4-(1) 급여비용의 부담.hwp` | 본인부담 기준 |
| 181 | 직접 조제 | `4-(2) 직접조제.hwp` | 직접 조제 본인부담 |
| 182 | 식대 | `4-(3) 식대.hwp` | 식대 본인부담 |
| 192 | 경증질환 약제비 본인부담 차등제 | `5-(5) 경증질환 약제비 본인부담 차등제.hwp` | 차등제 해석 |
| 199 | 의료급여 본인부담 정리 | `의료급여 본인부담 정리.pdf` | 본인부담 종합 정리 |

#### 3-5. 의료급여비용의 청구 및 정산 (4개)

| SEQ | 문서명 | 파일명 | 설명 |
|-----|--------|--------|------|
| 184 | 급여비용의 청구 | `5-(1) 급여비용의 청구.hwp` | 청구 절차 해석 |
| 185 | 급여비용의 정산 | `5-(2) 급여비용의 정산.hwp` | 정산 절차 해석 |
| 186 | 대지급금 제도 | `5-(3) 대지급금 제도.hwp` | 대지급금 해석 |
| 187 | 부당이득금 | `5-(4) 부당이득금.hwp` | 부당이득금 처리 |

#### 3-6. 의료급여 정액수가 (3개)

| SEQ | 문서명 | 파일명 | 설명 |
|-----|--------|--------|------|
| 189 | 정신질환자 | `6-(1) 정신질환자.hwp` | 정신질환 정액수가 |
| 190 | 정신과 인력차등제 관련 | `6-(2) 정신과 인력차등제 관련5.hwp` | 인력차등제 해석 |
| 191 | 혈액투석 환자 | `6-(3) 혈액투석 환자.hwp` | 투석 정액수가 |

#### 3-7. 코로나바이러스감염증-19 관련 (1개)

| SEQ | 문서명 | 파일명 | 설명 |
|-----|--------|--------|------|
| 212 | 코로나바이러스감염증-19관련 | `8-(1) 코로나바이러스감염증-19관련.hwp` | 코로나19 특별 해석 |

#### 3-8. 기타 행정해석 (5개)

| SEQ | 문서명 | 파일명 | 설명 |
|-----|--------|--------|------|
| 194 | 세월호 사고 관련 | `7-(1) 세월호 사고 관련.hwp` | 세월호 사고 특례 |
| 195 | 영상수가 인하고시 소송결과 관련 | `7-(2) 영상수가 인하고시 소송결과 관련.hwp` | 소송 결과 반영 |
| 196 | 선별급여 관련 | `7-(3) 선별급여 관련.hwp` | 선별급여 해석 |
| 197 | 메르스(MERS) 관련 | `7-(4) 메르스 관련.hwp` | MERS 특별 해석 |
| 198 | 응급의료수가 관련 | `7-(5) 응급의료수가 관련.hwp` | 응급의료 수가 |

---

## 🔧 사용 방법

### 1. 환경 설정

```bash
# 가상환경 생성 및 활성화
python -m venv venv
source venv/bin/activate  # Windows: venv\Scripts\activate

# 패키지 설치
pip install playwright beautifulsoup4

# Playwright 브라우저 설치
playwright install chromium
```

### 2. 크롤러 실행

```bash
# V3 크롤러 실행 (권장)
python -m hira_rulesvc.scrapers.law_scraper_v3

# 또는 직접 실행
cd hira_rulesvc/scrapers
python law_scraper_v3.py
```

### 3. 검증 스크립트 실행

```bash
# 다운로드 파일 검증
python hira_rulesvc/debug/verify_downloads.py

# 폴더별 그룹핑 재생성
python hira_rulesvc/debug/group_by_folder.py
```

---

## 🛠️ 크롤러 버전 히스토리

### V3 (최종, 2025-10-16)
- **방식**: 폴더 경로 기반 트리 네비게이션
- **성공률**: 96.4% (53/55개, 자동 수집)
- **핵심 개선**: 트리 구조를 따라 폴더별로 모든 다운로드 버튼 클릭
- **기술**: Playwright의 iframe 처리, 동적 로딩 대기

### V2 (미사용, 2025-10-14)
- **방식**: SEQ로 직접 접근 시도
- **결과**: 실패 (폴더 목록만 표시, 문서 접근 불가)
- **원인**: 트리 계층 구조를 무시한 접근

### V1 (초기, 2025-10-13)
- **방식**: 기본 탐색 및 트리 구조 파싱
- **결과**: document_tree.json 생성

---

## 📈 프로젝트 진행 타임라인

| 날짜 | 작업 | 결과 | 문서 수 |
|------|------|------|---------|
| 2025-10-13 | 초기 탐색 및 트리 구조 분석 | document_tree.json 생성 | 0개 |
| 2025-10-14 | V2 개발 및 SEQ 접근 시도 | 실패, 재설계 필요 | 0개 |
| 2025-10-16 | V3 완성 및 자동 수집 | 53개 수집 성공 | 53개 |
| 2025-10-17 | 중복 제거 및 수동 추가 | 100% 완료 | 56개 |

---

## 📊 데이터 품질

### 파일명 규칙

**법령 문서**:
```
{문서명}({발령기관})({제정번호})({발령일}).hwp
예: 의료급여법(법률)(제20309호)(20240517).hwp
```

**행정해석 문서**:
```
{카테고리}-({세부번호}) {문서명}.hwp
예: 4-(1) 급여비용의 부담.hwp
```

**고시 문서**:
```
(제{고시번호}호) {문서명}.hwp
예: (제2025-167호) 요양급여비용 청구방법...hwp
```

### 메타데이터 매핑 및 출처

#### 메타데이터 구조

모든 문서는 `config/document_tree.json`에 다음 정보가 매핑됨:
- **SEQ**: 문서 고유 번호 (HIRA 사이트 내부 ID)
- **name**: 표준 문서명
- **path**: 폴더 계층 경로

#### 메타데이터 출처

| 항목 | 출처 | 추출 방법 |
|------|------|----------|
| **SEQ** | HIRA 사이트 트리 구조 | V1 크롤러로 `document_tree.json` 생성 |
| **name** | HIRA 사이트 트리 구조 | 사이트의 문서명 그대로 수집 |
| **path** | HIRA 사이트 트리 구조 | 폴더 계층 구조 파싱 |
| **카테고리** | `path` 분석 | 폴더 경로 키워드 기반 분류 |
| **파일명** | 실제 다운로드된 파일 | 사이트에서 제공하는 파일명 그대로 |
| **발령기관, 제정번호** | 파일명 파싱 | 파일명의 괄호 안 정보 추출 |

**예시**:
```json
// document_tree.json
{
  "seq": "125",
  "name": "의료급여법",
  "path": ["의료급여", "의료급여법"]
}

// 실제 파일명
의료급여법(법률)(제20309호)(20240517).hwp
         ↑      ↑          ↑
      발령기관  제정번호    발령일
```

**SEQ 번호 체계**:
- **2-11**: 요양급여 청구방법 관련
- **96-216**: 고시기준
- **111-125**: 의료급여법 관련
- **160-198**: 행정해석
- 번호가 연속되지 않음 (HIRA 사이트의 내부 ID 기준)

---

## 🚀 향후 계획

### 1. 전처리 파이프라인 구축
- Upstage Document Parse API 연동
- HWP/PDF → Markdown/JSON 변환
- 메타데이터 자동 태깅

### 2. 데이터 적재
- 벡터 데이터베이스 적재
- RAG 시스템 구축

### 3. 자동 업데이트
- 정기적 크롤링 스케줄러
- 변경 사항 감지 및 알림

---

## 📚 관련 문서

### 작업 일지
- [2025-10-13: 초기 탐색](../docs/journal/hira_rulesvc/2025-10-13_initial_exploration.md)
- [2025-10-13: V1 개발](../docs/journal/hira_rulesvc/2025-10-13_law_scraper_development.md)
- [2025-10-14: 재구조화 계획](../docs/journal/hira_rulesvc/2025-10-14_restructure_plan.md)
- [2025-10-16: V3 완료](../docs/journal/hira_rulesvc/2025-10-16_scraper_v3_completion.md)
- [2025-10-17: 최종 완료](../docs/journal/hira_rulesvc/2025-10-17_final_collection_complete.md)

### 계획 문서
- [프로젝트 계획서](../docs/plans/hira_rulesvc.md)

### 샘플 데이터
- [트리 구조](../docs/samples/hira_rulesvc/tree.md)

---

## 🤝 기여

버그 리포트나 개선 제안은 이슈로 등록해주세요.

---

## 📄 라이선스

이 프로젝트는 수집된 데이터의 2차 저작물 사용 권한을 포함하지 않습니다.
데이터 출처: 건강보험심사평가원 (https://rulesvc.hira.or.kr)

---

**최종 업데이트**: 2025-10-17
**프로젝트 상태**: ✅ 완료 (100%)
