# TODO: KCD 코드 매칭

**작성일**: 2025-10-27
**우선순위**: 낮음 (약제 매칭 완료 후 진행)

## 배경

KCD (한국표준질병사인분류) 코드를 ICD-10 (국제질병분류) 등 국제표준과 매칭하는 작업이 필요함.

## 현황

### 가용 데이터
1. **KCD-8 파싱 데이터**: `data/hira_master/parsed/KCD-8 1권_220630_20220630034856.json`
   - 1,156 페이지 파싱 완료
   - KCD 코드 및 질환명 포함

2. **상병마스터**: `data/hira_master/배포용 상병마스터_250908(2).xlsx`
   - 실제 마스터 데이터 아님 (변경 내역 문서)
   - 사용 불가

### 필요한 작업

1. **KCD → ICD-10 매핑**
   - KCD-8 코드를 ICD-10 코드로 변환
   - 예: KCD `C34.1` → ICD-10 `C34.1` (동일하지만 검증 필요)
   - 매핑 테이블 구축

2. **암 관련 코드 필터링**
   - C00-C97: 악성신생물(암)
   - D00-D48: 양성신생물
   - 필터링 후 암 전용 사전 생성

3. **질환명 표준화**
   - 한글명 vs 영문명
   - 별칭 처리 (예: "유방암" = "유방의 악성신생물")

## 구현 계획

### Step 1: KCD-8 파싱 데이터 분석
```python
# 파일 읽기
with open('data/hira_master/parsed/KCD-8 1권_220630_20220630034856.json') as f:
    kcd_data = json.load(f)

# 구조 확인
# - 코드 형식
# - 질환명 추출 방법
# - 계층 구조 (대분류 > 중분류 > 소분류)
```

### Step 2: ICD-10 매핑 테이블 구축
```python
# ICD-10 공식 데이터 다운로드 또는
# KCD-ICD-10 매핑 파일 확보

icd10_mapping = {
    "C34.1": {
        "kcd_code": "C34.1",
        "icd10_code": "C34.1",
        "korean_name": "기관지암",
        "english_name": "Malignant neoplasm of main bronchus"
    }
}
```

### Step 3: 암질환 데이터와 매칭
```python
# HIRA 암질환 파싱 데이터에서 KCD 코드 추출
# → 사전 Lookup
# → ICD-10 코드 변환
```

## 참고 자료

1. **KCD 공식 사이트**: 통계청 한국표준질병사인분류
2. **ICD-10**: WHO International Classification of Diseases
3. **KCD-ICD-10 매핑**: 건강보험심사평가원 제공 자료 확인 필요

## 작업 시작 조건

- ✅ 약제 매칭 작업 완료
- ✅ 약제 사전 구축 완료
- ✅ 매칭률 70% 이상 달성

## 예상 소요 시간

- KCD-8 데이터 분석: 2-3시간
- ICD-10 매핑 구축: 4-6시간
- 검증 및 테스트: 2-3시간
- **총 예상**: 8-12시간

---

**상태**: 보류 (약제 매칭 우선)
**다음 업데이트**: 약제 매칭 완료 후
