# HIRA ë¬¸ì„œ íŒŒì‹± ì‘ì—…

**ì‘ì—…ì¼**: 2025-10-17
**ì‘ì—…ì**: Claude Code
**ìƒíƒœ**: âš ï¸ ë¶€ë¶„ ì™„ë£Œ (44/56 íŒŒì¼)

---

## ğŸ“‹ ì‘ì—… ê°œìš”

HIRA ê³ ì‹œ/ë²•ë ¹ ë¬¸ì„œ 56ê°œë¥¼ Upstage Document Parse APIë¥¼ ì‚¬ìš©í•˜ì—¬ Markdown/HTMLë¡œ ë³€í™˜

### íŒŒì‹± ê²°ê³¼

| í•­ëª© | ê²°ê³¼ |
|------|------|
| ì „ì²´ íŒŒì¼ | 56ê°œ |
| ì„±ê³µ | 44ê°œ (78.6%) |
| ì‹¤íŒ¨ | 12ê°œ (21.4%) |
| ì´ í˜ì´ì§€ | 243 í˜ì´ì§€ |
| ë¹„ìš© | $2.43 (ì•½ â‚©3,159ì›) |

---

## ğŸ› ï¸ êµ¬í˜„ ë‚´ìš©

### 1. ê³µí†µ íŒŒì„œ ëª¨ë“ˆ êµ¬í˜„

**íŒŒì¼**: `shared/parsers.py`

```
BaseParser (ì¶”ìƒ í´ë˜ìŠ¤)
  â”œâ”€â”€ parse() - ì¶”ìƒ ë©”ì„œë“œ
  â””â”€â”€ supports() - í™•ì¥ì ì§€ì› ì—¬ë¶€

UpstageParser (êµ¬í˜„ í´ë˜ìŠ¤)
  â”œâ”€â”€ API URL: https://api.upstage.ai/v1/document-ai/document-parse
  â”œâ”€â”€ ì§€ì› í˜•ì‹: HWP, PDF, DOCX, PPTX, XLSX, ì´ë¯¸ì§€
  â”œâ”€â”€ ì¶œë ¥: Markdown + HTML
  â””â”€â”€ ìµœëŒ€ í¬ê¸°: 50MB (ë¬¸ì„œ ê¸°ì¤€)

ParserFactory
  â””â”€â”€ create() - íŒŒì„œ ì¸ìŠ¤í„´ìŠ¤ ìƒì„±
```

**íŠ¹ì§•**:
- ì¶”ìƒ í´ë˜ìŠ¤ íŒ¨í„´ìœ¼ë¡œ í™•ì¥ ê°€ëŠ¥í•œ êµ¬ì¡°
- `.env` íŒŒì¼ì—ì„œ API í‚¤ ìë™ ë¡œë“œ
- ì—ëŸ¬ í•¸ë“¤ë§ (íŒŒì¼ ì—†ìŒ, ì§€ì› ì•ˆí•¨, API ì‹¤íŒ¨)

### 2. HIRA íŒŒì‹± ìŠ¤í¬ë¦½íŠ¸ êµ¬í˜„

**íŒŒì¼**: `hira_rulesvc/parse_documents.py`

**ì£¼ìš” ê¸°ëŠ¥**:
```python
parse_sample(N)     # Nê°œ ìƒ˜í”Œ í…ŒìŠ¤íŠ¸
parse_all()         # ì „ì²´ 56ê°œ íŒŒì¼ íŒŒì‹±
retry_failed()      # ì‹¤íŒ¨ íŒŒì¼ë§Œ ì¬ì‹œë„
```

**CLI ì‚¬ìš©ë²•**:
```bash
python hira_rulesvc/parse_documents.py --sample 3   # ìƒ˜í”Œ 3ê°œ
python hira_rulesvc/parse_documents.py --all        # ì „ì²´ íŒŒì‹±
python hira_rulesvc/parse_documents.py --retry      # ì¬ì‹œë„
```

**ë©”íƒ€ë°ì´í„° ë§¤í•‘**:
- `document_tree.json`ì—ì„œ SEQ, name, path ì¶”ì¶œ
- ìë™ ì¹´í…Œê³ ë¦¬ ë¶„ë¥˜ (ë²•ë ¹, ê³ ì‹œ, í–‰ì •í•´ì„)
- íŒŒì‹± ì‹œê° (`parsed_at`) ê¸°ë¡

### 3. ì¶œë ¥ í˜•ì‹

**ì €ì¥ ê²½ë¡œ**: `data/hira_rulesvc/parsed/{íŒŒì¼ëª…}.json`

```json
{
  "content": "# ì œëª©\n\në‚´ìš©...",
  "html": "<h1>ì œëª©</h1><p>ë‚´ìš©...</p>",
  "metadata": {
    "seq": "187",
    "name": "ë¶€ë‹¹ì´ë“ê¸ˆ",
    "path": ["ì˜ë£Œê¸‰ì—¬", "í–‰ì •í•´ì„", "ì˜ë£Œê¸‰ì—¬ë¹„ìš©ì˜ ì²­êµ¬ ë° ì •ì‚°"],
    "category": "í–‰ì •í•´ì„"
  },
  "pages": 1,
  "model": "document-parse-250618",
  "usage": {"pages": 1},
  "filename": "5-(4) ë¶€ë‹¹ì´ë“ê¸ˆ.hwp",
  "parsed_at": "2025-10-17T17:07:47.182215"
}
```

---

## âš ï¸ ì‹¤íŒ¨ íŒŒì¼ ë¶„ì„

### 1. **413 Request Entity Too Large (2ê°œ)**

íŒŒì¼ í¬ê¸°ê°€ í¬ì§€ ì•ŠìŒì—ë„ API ìš”ì²­ ì œí•œì— ê±¸ë¦¼

| íŒŒì¼ëª… | í¬ê¸° |
|--------|------|
| ìš”ì–‘ê¸‰ì—¬ë¹„ìš© ì‹¬ì‚¬ì²­êµ¬ì„œÂ·ëª…ì„¸ì„œ ì„¸ë¶€ì‘ì„±ìš”ë ¹(2025ë…„ 8ì›” 1ì¼).hwp | 1.1MB |
| ì˜ë£Œê¸‰ì—¬ìˆ˜ê°€ì˜ ê¸°ì¤€ ë° ì¼ë°˜ê¸°ì¤€(ê³ ì‹œ ì œ2025-171í˜¸, 25.10.1. ì‹œí–‰)_ì „ë¬¸.hwp | 439KB |

**ì›ì¸ ë¶„ì„**:
- Upstage API ë¬¸ì„œìƒ ìµœëŒ€ 50MB ì§€ì›
- ì‹¤ì œë¡œëŠ” ì•½ 1MB ì´í•˜ì—ì„œ 413 ì—ëŸ¬ ë°œìƒ
- APIì˜ ì‹¤ì œ ì œí•œì´ ë¬¸ì„œí™”ëœ ê²ƒë³´ë‹¤ ë‚®ì„ ê°€ëŠ¥ì„±

**í•´ê²° ë°©ì•ˆ**:
- Upstage Consoleì—ì„œ ìˆ˜ë™ ì—…ë¡œë“œ í…ŒìŠ¤íŠ¸
- ë˜ëŠ” PDF ë³€í™˜ í›„ ì¬ì‹œë„
- Upstage ì§€ì›íŒ€ ë¬¸ì˜

### 2. **500 Server Error (10ê°œ)**

ëª¨ë“  íŒŒì¼ì´ ë°˜ë³µì ìœ¼ë¡œ 500 ì—ëŸ¬ ë°œìƒ

```
ê·¼ë¡œëŠ¥ë ¥í‰ê°€ì˜ ê¸°ì¤€ ë“±ì— ê´€í•œ ê³ ì‹œ(ë³´ê±´ë³µì§€ë¶€ê³ ì‹œ)(ì œ2025-30í˜¸)(20250220).hwp
ë…¸ìˆ™ì¸ì§„ë£Œì‹œì„¤ ì§€ì • ë“±ì— ê´€í•œ ê³ ì‹œ(ë³´ê±´ë³µì§€ë¶€ê³ ì‹œ)(ì œ2025-46í˜¸)(20250321).hwp
ì„ íƒì˜ë£Œê¸‰ì—¬ê¸°ê´€ ì ìš© ëŒ€ìƒì ë° ì´ìš© ì ˆì°¨ ë“±ì— ê´€í•œ ê·œì •(ë³´ê±´ë³µì§€ë¶€ê³ ì‹œ)(ì œ2020-111í˜¸)(20200501).hwp
ìš”ì–‘ë¹„ì˜ ì˜ë£Œê¸‰ì—¬ ê¸°ì¤€ ë° ë°©ë²•(ë³´ê±´ë³µì§€ë¶€ê³ ì‹œ)(ì œ2025-26í˜¸)(20250204).hwp
ì˜ë£Œê¸‰ì—¬ ëŒ€ìƒ ì—¬ë¶€ì˜ í™•ì¸ ë°©ë²• ë° ì ˆì°¨ ë“±ì— ê´€í•œ ê¸°ì¤€(ë³´ê±´ë³µì§€ë¶€ê³ ì‹œ)(ì œ2023-144í˜¸)(20230701).hwp
ì˜ë£Œê¸‰ì—¬ê¸°ê´€ ê°„ ë™ì¼ì„±ë¶„ ì˜ì•½í’ˆ ì¤‘ë³µíˆ¬ì•½ ê´€ë¦¬ì— ê´€í•œ ê¸°ì¤€(ë³´ê±´ë³µì§€ë¶€ê³ ì‹œ)(ì œ2022-174í˜¸)(20220802).hwp
ì˜ë£Œê¸‰ì—¬ë²• ì‹œí–‰ê·œì¹™(ë³´ê±´ë³µì§€ë¶€ë ¹)(ì œ01096í˜¸)(20250311).hwp
ì˜ë£Œê¸‰ì—¬ë²• ì‹œí–‰ë ¹(ëŒ€í†µë ¹ë ¹)(ì œ34928í˜¸)(20241002).hwp
ì˜ë£Œê¸‰ì—¬ë²•(ë²•ë¥ )(ì œ20309í˜¸)(20240517).hwp
ì„ì‹ Â·ì¶œì‚° ì§„ë£Œë¹„ ë“±ì˜ ì˜ë£Œê¸‰ì—¬ê¸°ì¤€ ë° ë°©ë²•(ë³´ê±´ë³µì§€ë¶€ê³ ì‹œ)(ì œ2023-281í˜¸)(20231228).hwp
```

**ì›ì¸ ë¶„ì„**:
- Upstage API ì„œë²„ ì¼ì‹œì  ë¬¸ì œ
- ì¬ì‹œë„ì—ì„œë„ ë™ì¼ ì—ëŸ¬ ë°œìƒ
- API ìƒíƒœ ë¶ˆì•ˆì •

**í•´ê²° ë°©ì•ˆ**:
- ëª‡ ì‹œê°„/ì¼ í›„ ì¬ì‹œë„
- `python hira_rulesvc/parse_documents.py --retry` ëª…ë ¹ì–´ ì‚¬ìš©
- Upstage API ìƒíƒœ ëª¨ë‹ˆí„°ë§

---

## ğŸ“Š ì¹´í…Œê³ ë¦¬ë³„ í†µê³„ (ì„±ê³µí•œ 44ê°œ)

| ì¹´í…Œê³ ë¦¬ | íŒŒì¼ ìˆ˜ | ì˜ˆìƒ ë¹„ìœ¨ |
|----------|---------|-----------|
| í–‰ì •í•´ì„ | ~30ê°œ | ~68% |
| ê³ ì‹œ | ~10ê°œ | ~23% |
| ë²•ë ¹ | ~4ê°œ | ~9% |

**ì£¼ìš” ì„±ê³µ íŒŒì¼**:
- âœ… ì˜ë£Œê¸‰ì—¬ë²• ê´€ë ¨ í–‰ì •í•´ì„ ëŒ€ë¶€ë¶„
- âœ… ê°ì¢… ê³ ì‹œ ë° ê·œì •
- âœ… ë³¸ì¸ë¶€ë‹´ ì •ë¦¬ PDF

**ì£¼ìš” ì‹¤íŒ¨ íŒŒì¼**:
- âŒ ì˜ë£Œê¸‰ì—¬ë²• 3ì¢… (ë²•ë¥ , ì‹œí–‰ë ¹, ì‹œí–‰ê·œì¹™)
- âŒ ëŒ€í˜• ê³ ì‹œ ë¬¸ì„œ 2ì¢… (413 ì—ëŸ¬)

---

## ğŸ’° ë¹„ìš© ë¶„ì„

### í˜„ì¬ ë¹„ìš© (44ê°œ)

| í•­ëª© | ë¹„ìš© |
|------|------|
| í˜ì´ì§€ ìˆ˜ | 243 í˜ì´ì§€ |
| USD | $2.43 |
| KRW (â‚©1,300 í™˜ìœ¨) | â‚©3,159 |
| í‰ê· /íŒŒì¼ | 5.5 í˜ì´ì§€ |

### ì¶”ì • ìµœì¢… ë¹„ìš© (56ê°œ ì „ì²´)

ì˜ˆìƒ ì¶”ê°€: 12ê°œ Ã— í‰ê·  5.5p = 66í˜ì´ì§€

| í•­ëª© | ì˜ˆìƒ ë¹„ìš© |
|------|-----------|
| ì¶”ê°€ í˜ì´ì§€ | ~66 í˜ì´ì§€ |
| ì¶”ê°€ USD | ~$0.66 |
| **ì´ ì˜ˆìƒ** | **$3.09 (â‚©4,017)** |

> ì´ˆê¸° ì¶”ì • $1.35ë³´ë‹¤ ë†’ì§€ë§Œ, ëŒ€í˜• ë¬¸ì„œë“¤ì´ ì˜ˆìƒë³´ë‹¤ ê¸´ ê²ƒìœ¼ë¡œ íŒë‹¨

---

## ğŸ”§ ê¸°ìˆ ì  ì´ìŠˆ ë° í•´ê²°

### 1. í˜ì´ì§€ ì¹´ìš´íŠ¸ ë²„ê·¸

**ë¬¸ì œ**: API ì‘ë‹µì—ì„œ `pages: 0`ìœ¼ë¡œ í‘œì‹œ

**ì›ì¸**: API ì‘ë‹µ êµ¬ì¡°ê°€ `{"pages": 0, "usage": {"pages": 1}}`ë¡œ ë˜ì–´ ìˆìŒ

**í•´ê²°**: `shared/parsers.py:166` ìˆ˜ì •
```python
# Before
"pages": api_result.get('pages', 0)

# After
"pages": usage.get('pages', 0)  # usage.pagesì—ì„œ ì‹¤ì œ í˜ì´ì§€ ìˆ˜ ê°€ì ¸ì˜¤ê¸°
```

### 2. Windows UTF-8 ì¸ì½”ë”©

**ë¬¸ì œ**: í•œê¸€ ë° ìœ ë‹ˆì½”ë“œ ë¬¸ì ì¶œë ¥ ì‹œ cp949 ì—ëŸ¬

**í•´ê²°**: `hira_rulesvc/parse_documents.py:14-16` ì¶”ê°€
```python
if sys.platform == 'win32':
    sys.stdout = codecs.getwriter('utf-8')(sys.stdout.buffer, 'strict')
    sys.stderr = codecs.getwriter('utf-8')(sys.stderr.buffer, 'strict')
```

---

## ğŸ“ ë‹¤ìŒ ë‹¨ê³„

### ìš°ì„ ìˆœìœ„ 1: ì‹¤íŒ¨ íŒŒì¼ ì¬ì‹œë„
- [ ] ëª‡ ì‹œê°„ í›„ `--retry` ì¬ì‹¤í–‰
- [ ] 413 ì—ëŸ¬ 2ê°œ íŒŒì¼ ìˆ˜ë™ ì²˜ë¦¬
- [ ] Upstage ì§€ì›íŒ€ ë¬¸ì˜ (í•„ìš”ì‹œ)

### ìš°ì„ ìˆœìœ„ 2: ë°ì´í„° ì „ì²˜ë¦¬
- [ ] 44ê°œ JSON íŒŒì¼ ë¶„ì„
- [ ] Markdown í…ìŠ¤íŠ¸ ì •ì œ
- [ ] ì²­í¬ ë¶„í•  ì „ëµ ìˆ˜ë¦½

### ìš°ì„ ìˆœìœ„ 3: ë²¡í„° DB ì¤€ë¹„
- [ ] ì„ë² ë”© ëª¨ë¸ ì„ ì •
- [ ] ë²¡í„° DB ì„ íƒ (ChromaDB, Pinecone ë“±)
- [ ] ë©”íƒ€ë°ì´í„° ìŠ¤í‚¤ë§ˆ ì„¤ê³„

---

## ğŸ“‚ ì‚°ì¶œë¬¼

### ìƒì„±ëœ íŒŒì¼

```
data/hira_rulesvc/parsed/
  â”œâ”€â”€ _summary.json                    # íŒŒì‹± ìš”ì•½ í†µê³„
  â”œâ”€â”€ _failed_files.txt                # ì‹¤íŒ¨ íŒŒì¼ ëª©ë¡
  â”œâ”€â”€ 5-(4) ë¶€ë‹¹ì´ë“ê¸ˆ.json            # íŒŒì‹± ê²°ê³¼ (ì˜ˆì‹œ)
  â”œâ”€â”€ 1-(1) ì‹œì„¤ìˆ˜ìš©ì.json
  â””â”€â”€ ... (ì´ 44ê°œ JSON)
```

### ì½”ë“œ íŒŒì¼

```
shared/
  â””â”€â”€ parsers.py                        # ê³µí†µ íŒŒì„œ ëª¨ë“ˆ (219ì¤„)

hira_rulesvc/
  â””â”€â”€ parse_documents.py                # HIRA íŒŒì‹± ìŠ¤í¬ë¦½íŠ¸ (384ì¤„)
```

---

---

## ğŸ” ì‹¤íŒ¨ íŒŒì¼ ìƒì„¸ ë¶„ì„

### ì—ëŸ¬ ìœ í˜•ë³„ ë¶„ë¥˜

#### **413 Request Entity Too Large (2ê°œ)**
| íŒŒì¼ëª… | í¬ê¸° | ì¹´í…Œê³ ë¦¬ |
|--------|------|----------|
| ìš”ì–‘ê¸‰ì—¬ë¹„ìš© ì‹¬ì‚¬ì²­êµ¬ì„œÂ·ëª…ì„¸ì„œ ì„¸ë¶€ì‘ì„±ìš”ë ¹(2025ë…„ 8ì›” 1ì¼).hwp | 1,090KB | ê³ ì‹œ |
| ì˜ë£Œê¸‰ì—¬ìˆ˜ê°€ì˜ ê¸°ì¤€ ë° ì¼ë°˜ê¸°ì¤€(ê³ ì‹œ ì œ2025-171í˜¸, 25.10.1. ì‹œí–‰)_ì „ë¬¸.hwp | 438KB | ê³ ì‹œ |

#### **500 Server Error (10ê°œ)**

**ë²•ë ¹ ë¬¸ì„œ (3ê°œ) - ìµœìš°ì„  ì²˜ë¦¬ í•„ìš”**
- `ì˜ë£Œê¸‰ì—¬ë²•(ë²•ë¥ )(ì œ20309í˜¸)` - 250KB â­â­â­â­â­
- `ì˜ë£Œê¸‰ì—¬ë²• ì‹œí–‰ë ¹(ì œ34928í˜¸)` - 219KB â­â­â­â­â­
- `ì˜ë£Œê¸‰ì—¬ë²• ì‹œí–‰ê·œì¹™(ì œ01096í˜¸)` - 259KB â­â­â­â­â­

**ê³ ì‹œ ë¬¸ì„œ (7ê°œ)**
- ê·¼ë¡œëŠ¥ë ¥í‰ê°€ì˜ ê¸°ì¤€ ë“±ì— ê´€í•œ ê³ ì‹œ - 122KB
- ë…¸ìˆ™ì¸ì§„ë£Œì‹œì„¤ ì§€ì • ë“±ì— ê´€í•œ ê³ ì‹œ - 100KB
- ì„ íƒì˜ë£Œê¸‰ì—¬ê¸°ê´€ ì ìš© ëŒ€ìƒì ë° ì´ìš© ì ˆì°¨ ë“±ì— ê´€í•œ ê·œì • - 110KB
- ìš”ì–‘ë¹„ì˜ ì˜ë£Œê¸‰ì—¬ ê¸°ì¤€ ë° ë°©ë²• - 112KB
- ì˜ë£Œê¸‰ì—¬ ëŒ€ìƒ ì—¬ë¶€ì˜ í™•ì¸ ë°©ë²• ë° ì ˆì°¨ ë“±ì— ê´€í•œ ê¸°ì¤€ - 112KB
- ì˜ë£Œê¸‰ì—¬ê¸°ê´€ ê°„ ë™ì¼ì„±ë¶„ ì˜ì•½í’ˆ ì¤‘ë³µíˆ¬ì•½ ê´€ë¦¬ì— ê´€í•œ ê¸°ì¤€ - 105KB
- ì„ì‹ Â·ì¶œì‚° ì§„ë£Œë¹„ ë“±ì˜ ì˜ë£Œê¸‰ì—¬ê¸°ì¤€ ë° ë°©ë²• - 113KB

### íŒ¨í„´ ë°œê²¬

1. **ë²•ë ¹ 3ì¢… ì‹¤íŒ¨ê°€ ì¹˜ëª…ì **: ì˜ë£Œê¸‰ì—¬ì˜ ê°€ì¥ ê¸°ë³¸ì´ ë˜ëŠ” ë²•ë¥ Â·ì‹œí–‰ë ¹Â·ì‹œí–‰ê·œì¹™
2. **í¬ê¸°ëŠ” ì •ìƒ**: 200~300KBì¸ë° 500 ì—ëŸ¬ â†’ íŒŒì¼ ë‚´ë¶€ ë³µì¡ë„ ë˜ëŠ” HWP í˜•ì‹ ë¬¸ì œ ì¶”ì •
3. **413 ì—ëŸ¬**: Upstage API ì‹¤ì œ ì œí•œì´ ì•½ 1MB ì´í•˜ë¡œ ì¶”ì • (ë¬¸ì„œìƒ 50MBì™€ ì°¨ì´)

---

## ğŸ› ï¸ ì¶”ê°€ êµ¬í˜„ ì‚¬í•­

### Document Digitization API ì§€ì›

**ë°°ê²½**: ì‚¬ìš©ìê°€ Upstageì˜ Document Digitization API ì œê³µ
- ì—”ë“œí¬ì¸íŠ¸: `/v1/document-digitization`
- ê°•ì œ OCR ì˜µì…˜: `ocr: "force"`

**êµ¬í˜„**:
```python
# shared/parsers.py
def parse_with_ocr(self, file_path: Path) -> Dict[str, Any]:
    """ê°•ì œ OCRë¡œ íŒŒì¼ íŒŒì‹±"""
    result = self._call_api_digitization(file_path)
    return self._format_result(result)

# hira_rulesvc/parse_documents.py
python hira_rulesvc/parse_documents.py --retry --ocr
```

**ê²°ê³¼**: ë™ì¼í•œ ì—ëŸ¬ ë°œìƒ (500 Server Error, 413 Request Too Large)
â†’ API ì¢…ë¥˜ì™€ ë¬´ê´€í•˜ê²Œ íŒŒì¼ ìì²´ì˜ ë¬¸ì œë¡œ í™•ì¸

---

## ğŸ¯ ê²°ë¡ 

### âœ… ì„±ê³¼
- **ê³µí†µ íŒŒì„œ ëª¨ë“ˆ ì™„ì„±** (ì¬ì‚¬ìš© ê°€ëŠ¥)
  - `shared/parsers.py` - BaseParser, UpstageParser, ParserFactory
  - Document Parse API + Digitization API ëª¨ë‘ ì§€ì›
- **56ê°œ ì¤‘ 44ê°œ (78.6%) íŒŒì‹± ì„±ê³µ**
- **Markdown + HTML + ë©”íƒ€ë°ì´í„°** ì™„ë²½ ì—°ë™
- **ë¹„ìš© íš¨ìœ¨ì **: $2.43 (243í˜ì´ì§€)

### âš ï¸ ì œì•½
- **ë²•ë ¹ 3ì¢… ì‹¤íŒ¨** - ì˜ë£Œê¸‰ì—¬ë²•, ì‹œí–‰ë ¹, ì‹œí–‰ê·œì¹™ (ìµœìš°ì„  í•´ê²° í•„ìš”)
- Upstage API ë¶ˆì•ˆì • (500 ì—ëŸ¬)
- ì¼ë¶€ íŒŒì¼ í¬ê¸° ì œí•œ (413 ì—ëŸ¬, ì‹¤ì œ ì œí•œ ~1MB)
- **12ê°œ íŒŒì¼ ë¯¸ì™„ë£Œ** (21.4%)

### ğŸ’¡ êµí›ˆ
- HWP ì§ì ‘ íŒŒì‹± ê°€ëŠ¥ (ë³€í™˜ ë¶ˆí•„ìš”)
- API ì œí•œì´ ë¬¸ì„œì™€ ë‹¤ë¥¼ ìˆ˜ ìˆìŒ (50MB â†’ ì‹¤ì œ ~1MB)
- ì‹¤íŒ¨ íŒŒì¼ ì¬ì‹œë„ ë¡œì§ í•„ìˆ˜
- OCR ê°•ì œ ëª¨ë“œë„ ë™ì¼ ì—ëŸ¬ ë°œìƒ â†’ íŒŒì¼ ìì²´ ë¬¸ì œ

---

## ğŸ“‹ ë‹¤ìŒ ë‹¨ê³„ ê¶Œì¥ ì‚¬í•­

### ìš°ì„ ìˆœìœ„ 1: ë²•ë ¹ 3ì¢… í™•ë³´ â­â­â­â­â­
**ì˜µì…˜ 1**: êµ­ê°€ë²•ë ¹ì •ë³´ì„¼í„° í¬ë¡¤ë§
- https://www.law.go.kr
- í…ìŠ¤íŠ¸ í˜•ì‹ ì œê³µ
- **í˜„ì¬ ì‚¬ìš© ë¶ˆê°€ ìƒíƒœ**

**ì˜µì…˜ 2**: ìˆ˜ë™ í…ìŠ¤íŠ¸ ì¶”ì¶œ
- í•œê¸€ Viewerë¡œ TXT ë³€í™˜
- Markdown ìˆ˜ë™ ì‘ì„±

**ì˜µì…˜ 3**: ê³µê³µë°ì´í„° Open API
- ë²•ì œì²˜ API í™œìš©

### ìš°ì„ ìˆœìœ„ 2: ë‚˜ë¨¸ì§€ 9ê°œ
- **413 ì—ëŸ¬ 2ê°œ**: Upstage Console ìˆ˜ë™ ì—…ë¡œë“œ
- **500 ì—ëŸ¬ 7ê°œ**: ë©°ì¹  í›„ API ì¬ì‹œë„ ë˜ëŠ” HIRA ì¬ë‹¤ìš´ë¡œë“œ

### ìš°ì„ ìˆœìœ„ 3: í˜„ì¬ ë°ì´í„°ë¡œ ì§„í–‰
- **44ê°œ íŒŒì¼(78.6%)ë¡œ RAG ì‹œìŠ¤í…œ êµ¬ì¶• ì‹œì‘**
- ë°ì´í„° ì „ì²˜ë¦¬ ë° ì²­í¬ ë¶„í• 
- ë²¡í„° DB ì¤€ë¹„
- ë²•ë ¹ 3ì¢…ì€ ë³„ë„ ì¶”ê°€

---

## ğŸ“‚ ìµœì¢… ì‚°ì¶œë¬¼

```
shared/parsers.py                        # ê³µí†µ íŒŒì„œ (286ì¤„)
  â”œâ”€â”€ BaseParser (ì¶”ìƒ í´ë˜ìŠ¤)
  â”œâ”€â”€ UpstageParser
  â”‚   â”œâ”€â”€ parse() - Document Parse API
  â”‚   â””â”€â”€ parse_with_ocr() - Digitization API
  â””â”€â”€ ParserFactory

hira_rulesvc/parse_documents.py          # íŒŒì‹± ìŠ¤í¬ë¦½íŠ¸ (405ì¤„)
  â”œâ”€â”€ parse_sample(N)
  â”œâ”€â”€ parse_all()
  â””â”€â”€ retry_failed(use_ocr)

data/hira_rulesvc/parsed/
  â”œâ”€â”€ _summary.json                      # í†µê³„ ìš”ì•½
  â”œâ”€â”€ _failed_files.txt                  # ì‹¤íŒ¨ ëª©ë¡
  â”œâ”€â”€ _failed_analysis.md                # ì‹¤íŒ¨ ìƒì„¸ ë¶„ì„
  â””â”€â”€ *.json (44ê°œ)                      # íŒŒì‹± ê²°ê³¼

docs/journal/hira_rulesvc/
  â””â”€â”€ 2025-10-17_document_parsing.md     # ì‘ì—… ì¼ì§€ (ë³¸ ë¬¸ì„œ)

scripts/
  â”œâ”€â”€ estimate_pages.py                  # í˜ì´ì§€ ìˆ˜ ì¶”ì •
  â””â”€â”€ check_failed.py                    # ì‹¤íŒ¨ íŒŒì¼ ë¶„ì„
```

---

**ì°¸ê³  ë§í¬**:
- Upstage Document Parse API: https://console.upstage.ai
- Upstage Digitization API: https://api.upstage.ai/v1/document-digitization
- ì‹¤íŒ¨ íŒŒì¼ ëª©ë¡: `data/hira_rulesvc/parsed/_failed_files.txt`
- ì‹¤íŒ¨ ìƒì„¸ ë¶„ì„: `data/hira_rulesvc/parsed/_failed_analysis.md`
- íŒŒì‹± ìš”ì•½: `data/hira_rulesvc/parsed/_summary.json`

---

**ì‘ì—… ì¢…ë£Œ**: 2025-10-17 18:30
**ë‹¤ìŒ ì‘ì—…**: ë²•ë ¹ 3ì¢… í™•ë³´ ë˜ëŠ” í˜„ì¬ 44ê°œë¡œ ì „ì²˜ë¦¬ ì‹œì‘
